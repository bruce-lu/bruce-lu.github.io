<!DOCTYPE html>
<html>
  <head>
  <title>
      
          AWS Elastic Beanstalk practices - Bruce Lu&#39;s pages
      
  </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="map[]" />
  <link rel="shortcut icon" type="image/x-icon" href="https://bruce-lu.github.io/img/favicon.ico">

  
  
  
  
  
  <link rel="stylesheet" href="https://bruce-lu.github.io/style.min.60c59e75c5046f0eded1491ec81bdadd4a68c3cb5d8aa97aeaa80d79260917d3.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

  
  

  <meta property="og:title" content="AWS Elastic Beanstalk practices" />
<meta property="og:description" content="Pre-reqs  aws-access-id &amp; aws-secret-key are required   Log on AWS console and generate the key
 Download and install EB CLI  https://docs.amazonaws.cn/console/elasticbeanstalk/eb-cli-install
Get started with a simple PHP application on EB  Commands would be used  mkdir zaws-eb-p-blue cd zaws-eb-p-blue/ ls -ltr eb init -p PHP # or just eb init without -p, there would be more options ls echo &quot;Hello World&quot; &gt; index.html eb create dev-env eb open   Commands output reference  admin@~/ws/zaws-eb-p-blue$eb init -p PHP Select a default region 1) us-east-1 : US East (N." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bruce-lu.github.io/blog/aws-elastic-beanstalk-practices/" />
<meta property="article:published_time" content="2019-11-14T10:18:09&#43;08:00"/>
<meta property="article:modified_time" content="2019-11-14T10:18:09&#43;08:00"/>

<meta itemprop="name" content="AWS Elastic Beanstalk practices">
<meta itemprop="description" content="Pre-reqs  aws-access-id &amp; aws-secret-key are required   Log on AWS console and generate the key
 Download and install EB CLI  https://docs.amazonaws.cn/console/elasticbeanstalk/eb-cli-install
Get started with a simple PHP application on EB  Commands would be used  mkdir zaws-eb-p-blue cd zaws-eb-p-blue/ ls -ltr eb init -p PHP # or just eb init without -p, there would be more options ls echo &quot;Hello World&quot; &gt; index.html eb create dev-env eb open   Commands output reference  admin@~/ws/zaws-eb-p-blue$eb init -p PHP Select a default region 1) us-east-1 : US East (N.">


<meta itemprop="datePublished" content="2019-11-14T10:18:09&#43;08:00" />
<meta itemprop="dateModified" content="2019-11-14T10:18:09&#43;08:00" />
<meta itemprop="wordCount" content="478">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="AWS Elastic Beanstalk practices"/>
<meta name="twitter:description" content="Pre-reqs  aws-access-id &amp; aws-secret-key are required   Log on AWS console and generate the key
 Download and install EB CLI  https://docs.amazonaws.cn/console/elasticbeanstalk/eb-cli-install
Get started with a simple PHP application on EB  Commands would be used  mkdir zaws-eb-p-blue cd zaws-eb-p-blue/ ls -ltr eb init -p PHP # or just eb init without -p, there would be more options ls echo &quot;Hello World&quot; &gt; index.html eb create dev-env eb open   Commands output reference  admin@~/ws/zaws-eb-p-blue$eb init -p PHP Select a default region 1) us-east-1 : US East (N."/>

  <!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->

  <!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <![endif]-->

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-124907735-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</head>

  <body>
    
  <h1>AWS Elastic Beanstalk practices</h1>
  <header>
  
  <div class="avatar">
    <img class="avatarMask" src="https://bruce-lu.github.io//img/avatar.jpg">
    <a href="https://bruce-lu.github.io/"><img src="https://bruce-lu.github.io//img/avatar-border.svg" }}></a>
  </div>
  
  <h2><a class="author" href="https://bruce-lu.github.io/">Bruce Lu</a></h2>
</header>

  
  
  <p class="date">November 14, 2019</p>
  
  <div id="contentBody">
    

<h2 id="pre-reqs">Pre-reqs</h2>

<ul>
<li>aws-access-id &amp; aws-secret-key are required
<br /></li>
</ul>

<p>Log on AWS console and generate the key</p>

<ul>
<li>Download and install EB CLI</li>
</ul>

<p><a href="https://docs.amazonaws.cn/console/elasticbeanstalk/eb-cli-install">https://docs.amazonaws.cn/console/elasticbeanstalk/eb-cli-install</a></p>

<h2 id="get-started-with-a-simple-php-application-on-eb">Get started with a simple PHP application on EB</h2>

<ul>
<li>Commands would be used</li>
</ul>

<pre><code class="language-Bash">mkdir zaws-eb-p-blue
cd zaws-eb-p-blue/
ls -ltr
eb init -p PHP # or just eb init without -p, there would be more options
ls
echo &quot;Hello World&quot; &gt; index.html
eb create dev-env
eb open

</code></pre>

<ul>
<li>Commands output reference</li>
</ul>

<pre><code class="language-Bash">admin@~/ws/zaws-eb-p-blue$eb init -p PHP

Select a default region
1) us-east-1 : US East (N. Virginia)
2) us-west-1 : US West (N. California)
3) us-west-2 : US West (Oregon)
4) eu-west-1 : EU (Ireland)
5) eu-central-1 : EU (Frankfurt)
6) ap-south-1 : Asia Pacific (Mumbai)
7) ap-southeast-1 : Asia Pacific (Singapore)
8) ap-southeast-2 : Asia Pacific (Sydney)
9) ap-northeast-1 : Asia Pacific (Tokyo)
10) ap-northeast-2 : Asia Pacific (Seoul)
11) sa-east-1 : South America (Sao Paulo)
12) cn-north-1 : China (Beijing)
13) cn-northwest-1 : China (Ningxia)
14) us-east-2 : US East (Ohio)
15) ca-central-1 : Canada (Central)
16) eu-west-2 : EU (London)
17) eu-west-3 : EU (Paris)
(default is 3): 13
Application zaws-eb-p-blue has been created.
admin@~/ws/aws-elastic-beanstalk-cli-setup/zaws-eb-p-blue$echo &quot;Hello World&quot; &gt; index.html
admin@~/ws/aws-elastic-beanstalk-cli-setup/zaws-eb-p-blue$ls
admin@~/ws/aws-elastic-beanstalk-cli-setup/zaws-eb-p-blue$echo &quot;Hello World&quot; &gt; index.html
admin@~/ws/aws-elastic-beanstalk-cli-setup/zaws-eb-p-blue$eb create dev-env
Creating application version archive &quot;app-191114_102219&quot;.
Uploading zaws-eb-p-blue/app-191114_102219.zip to S3. This may take a while.
Upload Complete.
Environment details for: dev-env
  Application name: zaws-eb-p-blue
  Region: cn-northwest-1
  Deployed Version: app-191114_102219
  Environment ID: e-sawuybrtg2
  Platform: arn:aws-cn:elasticbeanstalk:cn-northwest-1::platform/PHP 7.3 running on 64bit Amazon Linux/2.9.0
  Tier: WebServer-Standard-1.0
  CNAME: UNKNOWN
  Updated: 2019-11-14 02:22:24.384000+00:00
Printing Status:
2019-11-14 02:22:23    INFO    createEnvironment is starting.
2019-11-14 02:22:24    INFO    Using elasticbeanstalk-cn-northwest-1-005464510748 as Amazon S3 storage bucket for environment data.
 -- Events -- (safe to Ctrl+C)
2019-11-14 02:22:44    INFO    Created security group named: sg-07c1f2d369b203edb
2019-11-14 02:22:44    INFO    Created load balancer named: awseb-e-s-AWSEBLoa-1W1Z2T64ZALSZ
2019-11-14 02:23:00    INFO    Created security group named: awseb-e-sawuybrtg2-stack-AWSEBSecurityGroup-1DGBM8AL2W9RD
2019-11-14 02:23:01    INFO    Created Auto Scaling launch configuration named: awseb-e-sawuybrtg2-stack-AWSEBAutoScalingLaunchConfiguration-1DZNEYBFGYMF6
2019-11-14 02:23:48    INFO    Created Auto Scaling group named: awseb-e-sawuybrtg2-stack-AWSEBAutoScalingGroup-1VYC4P71PSAT6
2019-11-14 02:23:48    INFO    Waiting for EC2 instances to launch. This may take a few minutes.
2019-11-14 02:24:03    INFO    Created Auto Scaling group policy named: arn:aws-cn:autoscaling:cn-northwest-1:005464510748:scalingPolicy:fd552d69-7117-42c3-a1e5-cd0686f05ccd:autoScalingGroupName/awseb-e-sawuybrtg2-stack-AWSEBAutoScalingGroup-1VYC4P71PSAT6:policyName/awseb-e-sawuybrtg2-stack-AWSEBAutoScalingScaleUpPolicy-18PVQB8L5MBPR
2019-11-14 02:24:03    INFO    Created Auto Scaling group policy named: arn:aws-cn:autoscaling:cn-northwest-1:005464510748:scalingPolicy:b20a5336-7f78-44aa-9075-7b1486996610:autoScalingGroupName/awseb-e-sawuybrtg2-stack-AWSEBAutoScalingGroup-1VYC4P71PSAT6:policyName/awseb-e-sawuybrtg2-stack-AWSEBAutoScalingScaleDownPolicy-HLU17ASRWM2N
2019-11-14 02:24:03    INFO    Created CloudWatch alarm named: awseb-e-sawuybrtg2-stack-AWSEBCloudwatchAlarmHigh-1JE1KAT37CRIB
2019-11-14 02:24:03    INFO    Created CloudWatch alarm named: awseb-e-sawuybrtg2-stack-AWSEBCloudwatchAlarmLow-1XFURG3PRQW54
2019-11-14 02:24:14    INFO    Application available at dev-env-zkspacwmyg.cn-northwest-1.eb.amazonaws.com.cn.
2019-11-14 02:24:15    INFO    Successfully launched environment: dev-env

eb open
</code></pre>

<ul>
<li>Make change and deploy</li>
</ul>

<p>Make a change to index.html</p>

<pre><code class="language-Bash">eb deploy
eb open
</code></pre>

<ul>
<li>SSH to EB EC2 box</li>
</ul>

<pre><code class="language-Bash">eb ssh
</code></pre>

<ul>
<li>Clean up everything</li>
</ul>

<pre><code class="language-Bash">eb terminate --all

admin@~/ws/zaws-eb-p-blue$eb terminate --all
The application &quot;zaws-eb-p-blue&quot; and all its resources will be deleted.
This application currently has the following:
Running environments: 1
Configuration templates: 0
Application versions: 2

To confirm, type the application name: zaws-eb-p-blue
Removing application versions from s3.
2019-11-14 05:53:39    INFO    deleteApplication is starting.
2019-11-14 05:53:40    INFO    Invoking Environment Termination workflows.
2019-11-14 05:53:40    INFO    The environment termination step is done.
2019-11-14 05:53:41    INFO    The application has been deleted successfully.

</code></pre>

  </div>
  <footer>
  <p>
  &copy; 2019 Bruce Lu.
  Powered by <a href="https://gohugo.io/">Hugo</a>
  using the <a href="https://github.com/koirand/pulp/">pulp</a> theme.
  </p>
</footer>


  </body>
</html>
