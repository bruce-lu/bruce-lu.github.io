<!DOCTYPE html>
<html>
  <head>
  <title>
      
          AWS Elastic Beanstalk practices - Bruce Lu&#39;s pages
      
  </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="map[]" />
  <link rel="shortcut icon" type="image/x-icon" href="https://bruce-lu.github.io/img/favicon.ico">

  
  
  
  
  
  <link rel="stylesheet" href="https://bruce-lu.github.io/style.min.658d6d6b74f1690b9919f17a04765dd9d4c57b29efded85728be2bacbe8b4bb1.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

  
  

  <meta property="og:title" content="AWS Elastic Beanstalk practices" />
<meta property="og:description" content="Pre-reqs   aws-access-id &amp; aws-secret-key are required
Log on AWS console and generate the key
  Download and install EB CLI
https://docs.amazonaws.cn/console/elasticbeanstalk/eb-cli-install
  Get started with a simple PHP application on EB  Commands would be used  mkdir zaws-eb-p-blue cd zaws-eb-p-blue/ ls -ltr eb init -p PHP # or just eb init without -p, there would be more options ls echo &#34;Hello World&#34; &gt; index.html eb create dev-env eb open  Commands output reference  admin@~/ws/zaws-eb-p-blue$eb init -p PHP Select a default region 1) us-east-1 : US East (N." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bruce-lu.github.io/blog/aws-elastic-beanstalk-practices/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2019-11-14T10:18:09+08:00" />
<meta property="article:modified_time" content="2019-11-14T10:18:09+08:00" />

<meta itemprop="name" content="AWS Elastic Beanstalk practices">
<meta itemprop="description" content="Pre-reqs   aws-access-id &amp; aws-secret-key are required
Log on AWS console and generate the key
  Download and install EB CLI
https://docs.amazonaws.cn/console/elasticbeanstalk/eb-cli-install
  Get started with a simple PHP application on EB  Commands would be used  mkdir zaws-eb-p-blue cd zaws-eb-p-blue/ ls -ltr eb init -p PHP # or just eb init without -p, there would be more options ls echo &#34;Hello World&#34; &gt; index.html eb create dev-env eb open  Commands output reference  admin@~/ws/zaws-eb-p-blue$eb init -p PHP Select a default region 1) us-east-1 : US East (N."><meta itemprop="datePublished" content="2019-11-14T10:18:09+08:00" />
<meta itemprop="dateModified" content="2019-11-14T10:18:09+08:00" />
<meta itemprop="wordCount" content="478">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="AWS Elastic Beanstalk practices"/>
<meta name="twitter:description" content="Pre-reqs   aws-access-id &amp; aws-secret-key are required
Log on AWS console and generate the key
  Download and install EB CLI
https://docs.amazonaws.cn/console/elasticbeanstalk/eb-cli-install
  Get started with a simple PHP application on EB  Commands would be used  mkdir zaws-eb-p-blue cd zaws-eb-p-blue/ ls -ltr eb init -p PHP # or just eb init without -p, there would be more options ls echo &#34;Hello World&#34; &gt; index.html eb create dev-env eb open  Commands output reference  admin@~/ws/zaws-eb-p-blue$eb init -p PHP Select a default region 1) us-east-1 : US East (N."/>

  <!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->

  <!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <![endif]-->

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-124907735-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</head>

  <body>
    
  <h1>AWS Elastic Beanstalk practices</h1>
  <header>
  
  <div class="avatar">
    <img class="avatarMask" src="https://bruce-lu.github.io//img/avatar.jpg">
    <a href="https://bruce-lu.github.io/"><img src="https://bruce-lu.github.io//img/avatar-border.svg" }}></a>
  </div>
  
  <h2><a class="author" href="https://bruce-lu.github.io/">Bruce Lu</a></h2>
</header>

  
  
  <p class="date">November 14, 2019</p>
  
  <div id="contentBody">
    <h2 id="pre-reqs">Pre-reqs</h2>
<ul>
<li>
<p>aws-access-id &amp; aws-secret-key are required</p>
<p>Log on AWS console and generate the key</p>
</li>
<li>
<p>Download and install EB CLI</p>
<p><a href="https://docs.amazonaws.cn/console/elasticbeanstalk/eb-cli-install">https://docs.amazonaws.cn/console/elasticbeanstalk/eb-cli-install</a></p>
</li>
</ul>
<h2 id="get-started-with-a-simple-php-application-on-eb">Get started with a simple PHP application on EB</h2>
<ul>
<li>Commands would be used</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash">mkdir zaws-eb-p-blue
cd zaws-eb-p-blue/
ls -ltr
eb init -p PHP <span style="color:#75715e"># or just eb init without -p, there would be more options</span>
ls
echo <span style="color:#e6db74">&#34;Hello World&#34;</span> &gt; index.html
eb create dev-env
eb open

</code></pre></div><ul>
<li>Commands output reference</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash">admin@~/ws/zaws-eb-p-blue$eb init -p PHP

Select a default region
1<span style="color:#f92672">)</span> us-east-1 : US East <span style="color:#f92672">(</span>N. Virginia<span style="color:#f92672">)</span>
2<span style="color:#f92672">)</span> us-west-1 : US West <span style="color:#f92672">(</span>N. California<span style="color:#f92672">)</span>
3<span style="color:#f92672">)</span> us-west-2 : US West <span style="color:#f92672">(</span>Oregon<span style="color:#f92672">)</span>
4<span style="color:#f92672">)</span> eu-west-1 : EU <span style="color:#f92672">(</span>Ireland<span style="color:#f92672">)</span>
5<span style="color:#f92672">)</span> eu-central-1 : EU <span style="color:#f92672">(</span>Frankfurt<span style="color:#f92672">)</span>
6<span style="color:#f92672">)</span> ap-south-1 : Asia Pacific <span style="color:#f92672">(</span>Mumbai<span style="color:#f92672">)</span>
7<span style="color:#f92672">)</span> ap-southeast-1 : Asia Pacific <span style="color:#f92672">(</span>Singapore<span style="color:#f92672">)</span>
8<span style="color:#f92672">)</span> ap-southeast-2 : Asia Pacific <span style="color:#f92672">(</span>Sydney<span style="color:#f92672">)</span>
9<span style="color:#f92672">)</span> ap-northeast-1 : Asia Pacific <span style="color:#f92672">(</span>Tokyo<span style="color:#f92672">)</span>
10<span style="color:#f92672">)</span> ap-northeast-2 : Asia Pacific <span style="color:#f92672">(</span>Seoul<span style="color:#f92672">)</span>
11<span style="color:#f92672">)</span> sa-east-1 : South America <span style="color:#f92672">(</span>Sao Paulo<span style="color:#f92672">)</span>
12<span style="color:#f92672">)</span> cn-north-1 : China <span style="color:#f92672">(</span>Beijing<span style="color:#f92672">)</span>
13<span style="color:#f92672">)</span> cn-northwest-1 : China <span style="color:#f92672">(</span>Ningxia<span style="color:#f92672">)</span>
14<span style="color:#f92672">)</span> us-east-2 : US East <span style="color:#f92672">(</span>Ohio<span style="color:#f92672">)</span>
15<span style="color:#f92672">)</span> ca-central-1 : Canada <span style="color:#f92672">(</span>Central<span style="color:#f92672">)</span>
16<span style="color:#f92672">)</span> eu-west-2 : EU <span style="color:#f92672">(</span>London<span style="color:#f92672">)</span>
17<span style="color:#f92672">)</span> eu-west-3 : EU <span style="color:#f92672">(</span>Paris<span style="color:#f92672">)</span>
<span style="color:#f92672">(</span>default is 3<span style="color:#f92672">)</span>: <span style="color:#ae81ff">13</span>
Application zaws-eb-p-blue has been created.
admin@~/ws/aws-elastic-beanstalk-cli-setup/zaws-eb-p-blue$echo <span style="color:#e6db74">&#34;Hello World&#34;</span> &gt; index.html
admin@~/ws/aws-elastic-beanstalk-cli-setup/zaws-eb-p-blue$ls
admin@~/ws/aws-elastic-beanstalk-cli-setup/zaws-eb-p-blue$echo <span style="color:#e6db74">&#34;Hello World&#34;</span> &gt; index.html
admin@~/ws/aws-elastic-beanstalk-cli-setup/zaws-eb-p-blue$eb create dev-env
Creating application version archive <span style="color:#e6db74">&#34;app-191114_102219&#34;</span>.
Uploading zaws-eb-p-blue/app-191114_102219.zip to S3. This may take a <span style="color:#66d9ef">while</span>.
Upload Complete.
Environment details <span style="color:#66d9ef">for</span>: dev-env
  Application name: zaws-eb-p-blue
  Region: cn-northwest-1
  Deployed Version: app-191114_102219
  Environment ID: e-sawuybrtg2
  Platform: arn:aws-cn:elasticbeanstalk:cn-northwest-1::platform/PHP 7.3 running on 64bit Amazon Linux/2.9.0
  Tier: WebServer-Standard-1.0
  CNAME: UNKNOWN
  Updated: 2019-11-14 02:22:24.384000+00:00
Printing Status:
2019-11-14 02:22:23    INFO    createEnvironment is starting.
2019-11-14 02:22:24    INFO    Using elasticbeanstalk-cn-northwest-1-005464510748 as Amazon S3 storage bucket <span style="color:#66d9ef">for</span> environment data.
 -- Events -- <span style="color:#f92672">(</span>safe to Ctrl+C<span style="color:#f92672">)</span>
2019-11-14 02:22:44    INFO    Created security group named: sg-07c1f2d369b203edb
2019-11-14 02:22:44    INFO    Created load balancer named: awseb-e-s-AWSEBLoa-1W1Z2T64ZALSZ
2019-11-14 02:23:00    INFO    Created security group named: awseb-e-sawuybrtg2-stack-AWSEBSecurityGroup-1DGBM8AL2W9RD
2019-11-14 02:23:01    INFO    Created Auto Scaling launch configuration named: awseb-e-sawuybrtg2-stack-AWSEBAutoScalingLaunchConfiguration-1DZNEYBFGYMF6
2019-11-14 02:23:48    INFO    Created Auto Scaling group named: awseb-e-sawuybrtg2-stack-AWSEBAutoScalingGroup-1VYC4P71PSAT6
2019-11-14 02:23:48    INFO    Waiting <span style="color:#66d9ef">for</span> EC2 instances to launch. This may take a few minutes.
2019-11-14 02:24:03    INFO    Created Auto Scaling group policy named: arn:aws-cn:autoscaling:cn-northwest-1:005464510748:scalingPolicy:fd552d69-7117-42c3-a1e5-cd0686f05ccd:autoScalingGroupName/awseb-e-sawuybrtg2-stack-AWSEBAutoScalingGroup-1VYC4P71PSAT6:policyName/awseb-e-sawuybrtg2-stack-AWSEBAutoScalingScaleUpPolicy-18PVQB8L5MBPR
2019-11-14 02:24:03    INFO    Created Auto Scaling group policy named: arn:aws-cn:autoscaling:cn-northwest-1:005464510748:scalingPolicy:b20a5336-7f78-44aa-9075-7b1486996610:autoScalingGroupName/awseb-e-sawuybrtg2-stack-AWSEBAutoScalingGroup-1VYC4P71PSAT6:policyName/awseb-e-sawuybrtg2-stack-AWSEBAutoScalingScaleDownPolicy-HLU17ASRWM2N
2019-11-14 02:24:03    INFO    Created CloudWatch alarm named: awseb-e-sawuybrtg2-stack-AWSEBCloudwatchAlarmHigh-1JE1KAT37CRIB
2019-11-14 02:24:03    INFO    Created CloudWatch alarm named: awseb-e-sawuybrtg2-stack-AWSEBCloudwatchAlarmLow-1XFURG3PRQW54
2019-11-14 02:24:14    INFO    Application available at dev-env-zkspacwmyg.cn-northwest-1.eb.amazonaws.com.cn.
2019-11-14 02:24:15    INFO    Successfully launched environment: dev-env

eb open
</code></pre></div><ul>
<li>Make change and deploy</li>
</ul>
<p>Make a change to index.html</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash">eb deploy
eb open
</code></pre></div><ul>
<li>SSH to EB EC2 box</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash">eb ssh
</code></pre></div><ul>
<li>Clean up everything</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash">eb terminate --all

admin@~/ws/zaws-eb-p-blue$eb terminate --all
The application <span style="color:#e6db74">&#34;zaws-eb-p-blue&#34;</span> and all its resources will be deleted.
This application currently has the following:
Running environments: <span style="color:#ae81ff">1</span>
Configuration templates: <span style="color:#ae81ff">0</span>
Application versions: <span style="color:#ae81ff">2</span>

To confirm, type the application name: zaws-eb-p-blue
Removing application versions from s3.
2019-11-14 05:53:39    INFO    deleteApplication is starting.
2019-11-14 05:53:40    INFO    Invoking Environment Termination workflows.
2019-11-14 05:53:40    INFO    The environment termination step is <span style="color:#66d9ef">done</span>.
2019-11-14 05:53:41    INFO    The application has been deleted successfully.

</code></pre></div>
  </div>
  <footer>
  <p>
  &copy; 2020 Bruce Lu.
  Powered by <a href="https://gohugo.io/">Hugo</a>
  using the <a href="https://github.com/koirand/pulp/">pulp</a> theme.
  </p>
</footer>


  </body>
</html>
